# Download YouTube Clips

Download clips from YouTube based on autogenerated captions.

This should only work on UNIX-based systems since it uses a bash script. I have tested it on Ubuntu 20.04, and it may work on others.

I used this to make [Inexcusable](https://www.reddit.com/r/LockPickingLawyer/comments/htpzbt/inexcusable/),
in about two hours by simply searching for the word "Inexcusable" in any of Lock Picking Lawyer's
past few hundred videos. Download YouTube Clips did the work of downloading every snippet of his
videos that contains that word.

## Usage

Make sure you have installed Python 3 first.

1. Install [YouTube-dl](https://github.com/ytdl-org/youtube-dl/): `pip install --upgrade youtube-dl`
2. Make a new project: `python3 dlyt.py new-project projects/my-project.json`
3. Find the video IDs of interest. If you only have a few videos, you can do this by hand. If you want all videos from a single channel, I have a simple script to help with this.

    a. Open the channel video page such as https://www.youtube.com/c/lockpickinglawyer/videos

    b. Scroll until all of your desired videos show

    c. In the developer console, run the following code to get the IDs of all visible videos:

    ```
    console.log(`"${
      [...document.querySelectorAll("#primary #video-title[href]")]
      .map(e=>/\?v=(.*)/.exec(e.href)[1])
      .map(e=>e.slice(0,11))
      .join('" "')
    }"`)
    ```
4. Add those video IDs to the project, e.g. `python3 dlyt.py add-videos projects/my-project.json "dLXA5OAFZx0" "qpqL6C6Zfks" "r-QmeG-N8Bw"`

5. Search for clips within the videos attached to the project: `python3 dlyt.py download-clips projects/my-project.json "inexcusable"` will search for the word "inexcusable" in the captions of the videos in the project.

    a. The program will skip over videos that it could not download subtitles for. As far as I can tell, it only works for automatically-generated captions (which tend to be more precise in times), not for manually-entered subtitles.

6. Usually you will want to filter the results manually, so you must use the curses dialog to select desired results (Controls at bottom; the bolded text is the interval that would be downloaded if you hit <kbd>Enter</kbd> right then).

## Options

The file `downloader.py` has a few options you can vary:
- `RIGHT_PAD` and `LEFT_PAD` control how much extra time after and before each calculated interval should be included in the downloaded clip. I find that a `RIGHT_PAD` of about half a second is good to avoid cutting of the speaker's voice early, but you can experiment with these values.
- `INTERVAL` is the minimum interval, in seconds, between downloads of a video. You might want to lower this a little if you are downloading many short clips, but to respect the YouTube servers, it's best to keep this at least a second or so

## Improvements

Contributions welcome. Possible ideas to improve:

- Port to Windows
- Improve state saving when leaving the curses application early
- Modify to support other platforms such as Vimeo (should be just an extra argument for platforms that youtube-dl supports
automatic captioning on).
- Rework API (what was I thinking with the project system? It's not strictly necessary)
- Handle of manually-entered captions
- Proper full GUI interface
